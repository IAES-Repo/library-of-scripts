:root {
  --bg: #0f1115;
  --bg-alt: #181c22;
  --border: #2a3039;
  --text: #e6e9ef;
  --muted: #9aa4b1;
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius: 10px;
  --shadow: 0 4px 12px -2px rgba(0,0,0,0.4), 0 2px 4px -2px rgba(0,0,0,0.3);
  --cat-ingestion: #4ac27a;
  --cat-processing: #4aa7e0;
  --cat-handling: #e8c04b;
  --cat-docker: #1e6ad6;
  --gradient: linear-gradient(135deg,#1f2530,#12151a);
}

.layout { display: grid; grid-template-columns: 1fr auto; min-height: 100vh; background: var(--gradient); color: var(--text); }
.app-header { grid-column: 1 / -1; padding: 1.1rem 2rem 0.15rem; }
.app-header h1 { margin: 0 0 .25rem; font-size: 1.9rem; font-weight: 600; letter-spacing: .5px; }
.subtitle { margin: 0; color: var(--muted); font-size: .9rem; }

.legend { grid-column: 1 / -1; display: flex; flex-wrap: wrap; gap: .75rem; padding: 0 2rem 1rem; align-items: center; }
.legend-title { font-size: .75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin-right: .5rem; }
.legend-chip { background: var(--bg-alt); border: 1px solid var(--border); padding: .5rem 1rem; font-size: .8rem; border-radius: 1000px; position: relative; color: var(--text); }
.legend-chip::before { content: ''; width: .65rem; height: .65rem; border-radius: 50%; background: var(--chip-color,var(--muted)); display: inline-block; margin-right: .4rem; vertical-align: middle; box-shadow: 0 0 0 3px rgba(255,255,255,0.04); }
.legend-chip.active { outline: 2px solid var(--chip-color,var(--muted)); }

.summary-bar { grid-column: 1 / -1; display:flex; gap:.75rem; padding: .4rem 2rem 0; flex-wrap:wrap; }
.summary-pill { background: var(--bg-alt); border:1px solid var(--border); padding:.45rem .85rem; border-radius: 999px; font-size:.65rem; letter-spacing:.5px; display:flex; align-items:center; gap:.35rem; color: var(--muted); }
.summary-pill strong { font-size:.8rem; color: var(--text); letter-spacing:.5px; }
.summary-pill.up { border-color:#254c36; background: linear-gradient(145deg,#163021,#11241a); }
.summary-pill.up strong { color:#48d176; }
.summary-pill.down { border-color:#5a2d2d; background: linear-gradient(145deg,#2a1616,#211212); }
.summary-pill.down strong { color:#ff6b6b; }
.summary-pill.docker { border-color:#1e4d85; background: linear-gradient(145deg,#132235,#101a29); }
.summary-pill.docker strong { color: var(--cat-docker); }

.controls-row, .search-wrap, .search-input, .clear-btn { display:none !important; }
.content-wrap { justify-content:center; overflow:visible; }
.diagram-area { width:100%; display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:1.25rem; padding: 0 2rem 3rem; max-width:none; }
.diagram-area .host-card { min-width:0; }
.service { background: color-mix(in srgb, var(--service-color) 30%, #12171d); border:1px solid color-mix(in srgb, var(--service-color) 55%, #1c252d); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04); }
.service:hover { background: color-mix(in srgb, var(--service-color) 40%, #12171d); }
.service.dockerized { --service-color: var(--cat-docker); background: color-mix(in srgb, var(--cat-docker) 28%, #12171d); border-color: color-mix(in srgb, var(--cat-docker) 60%, #1c252d); }

@media (max-width: 1100px) { .diagram-area { padding:0 1rem 3rem; gap:1.25rem; } }
@media (max-width: 900px) { .controls-row { flex-direction:column; align-items:stretch; } .search-wrap { width:100%; } .search-input { width:100%; } }
@media (max-width: 640px) { .diagram-area { grid-template-columns: repeat(auto-fill,minmax(230px,1fr)); gap:1.25rem; } .host-card { padding: 1rem .9rem 1.1rem; } }

/* === Restored / Reinforced host card & docker group box styling === */
.host-card {
  background: var(--bg-alt);
  border: 1px solid var(--border);
  padding: 1rem 1rem 1.1rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: .75rem;
  cursor: pointer;
  position: relative;
  transition: border-color .25s, background .25s, transform .25s;
}
.host-card:hover { border-color: color-mix(in srgb, var(--cat-processing) 35%, var(--border)); background: #1a2027; }
.host-card:focus-visible { outline: 2px solid var(--cat-processing); outline-offset: 2px; }
.host-header { display:flex; align-items:baseline; justify-content:space-between; gap:.5rem; }
.host-header h3 { margin:0; font-size:1.05rem; font-weight:600; letter-spacing:.5px; }
.ip { font-size:.65rem; color:var(--muted); background:#1d2229; padding:.25rem .5rem; border-radius: var(--radius-xs); border:1px solid var(--border); }
.services { display:flex; flex-wrap:wrap; gap:.55rem; }

/* Service cards */
.service {
  position: relative;
  padding: .55rem .55rem .55rem 1.6rem;
  font-size: .7rem;
  line-height: 1.15;
  border-radius: var(--radius-sm);
  text-align: left;
  color: var(--text);
  flex: 1 1 calc(50% - .55rem);
  min-width: 108px;
  max-width: calc(50% - .55rem);
  background: color-mix(in srgb, var(--service-color) 18%, #12171d);
  border: 1px solid color-mix(in srgb, var(--service-color) 55%, #1c252d);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
  transition: background .25s, border-color .25s, transform .25s;
}
.service:hover { background: color-mix(in srgb, var(--service-color) 30%, #12171d); }
.service:focus-visible { outline:2px solid var(--service-color); outline-offset:2px; }
.service .svc-name { font-weight:600; display:block; margin-bottom:.2rem; }
.meta-row { display:flex; gap:.4rem; font-size:.6rem; color:var(--muted); }
.port { background:#1e242b; padding:.15rem .4rem; border-radius:999px; border:1px solid var(--border); }

.status-icon { position:static; left:auto; top:auto; font-size:.7rem; width:auto; height:auto; display:inline; background:none; border:none; margin-right:.35rem; }
.status-icon.up { color:#48d176; }
.status-icon.down { color:#ff6b6b; }
.status-icon.inline { position:static; margin-right:.35rem; }

/* Docker group nested box */
.docker-group {
  flex: 1 1 100%;
  background: linear-gradient(145deg,#132235,#101820);
  border: 1px solid color-mix(in srgb, var(--cat-docker) 55%, #1c252d);
  border-radius: var(--radius);
  padding: .55rem .6rem .65rem;
  position: relative;
  display:flex;
  flex-wrap:wrap;
  gap:.55rem;
  cursor:pointer;
}
.docker-group::before {
  content: 'Docker';
  position:absolute; top:-8px; left:10px;
  background: var(--cat-docker);
  color:#fff;
  font-size:.55rem; font-weight:600; letter-spacing:.5px;
  padding:2px 6px; border-radius:999px;
  box-shadow:0 2px 4px -2px rgba(0,0,0,.4);
}
.docker-group:focus-visible { outline:2px solid var(--cat-docker); outline-offset:2px; }
.docker-group .service { flex:1 1 calc(50% - .55rem); max-width:calc(50% - .55rem); }

/* Drawer tweaks (unchanged, kept for context if previously present) */
.drawer { top:0; background: var(--bg-alt); }

/* === Overrides for options 1 (single column), 2 (stronger colors), 4 (docker group layout) === */
.services { display:flex; flex-direction:column; gap:.45rem; }
.service { flex:none !important; width:100%; max-width:100%; min-width:0; background: color-mix(in srgb, var(--service-color) 52%, #12171d) !important; border-color: color-mix(in srgb, var(--service-color) 70%, #1c252d) !important; }
.service:hover { background: color-mix(in srgb, var(--service-color) 62%, #12171d) !important; }

.docker-group { display:flex; flex-direction:column; gap:.45rem; padding-top:1.1rem; }
.docker-group::before { top:-6px; }
.docker-group .service { flex:none !important; width:100%; max-width:100%; }
/* === End overrides === */

/* === Alignment & visual overrides (status left inline, no port bubble, fixed drawer) === */
.service { padding:.5rem .65rem !important; display:flex !important; align-items:center !important; gap:.55rem !important; position:relative; line-height:1.1; }
.service .svc-name { margin:0; font-weight:600; display:inline; }
.svc-row { flex:1; display:flex; align-items:center; justify-content:space-between; gap:.75rem; }
.status-icon { margin:0 .35rem 0 0 !important; font-size:.75rem; }
.port, .port.inline { background:none !important; border:none !important; padding:0 !important; border-radius:0 !important; color:var(--muted) !important; font-size:.65rem; font-weight:500; }
.docker-group .service { padding:.5rem .65rem !important; }

.drawer { position:fixed !important; top:0 !important; right:0 !important; bottom:0 !important; height:100vh !important; width:380px; max-width:90vw; overflow-y:auto; box-shadow:-4px 0 18px -4px rgba(0,0,0,0.55); border-left:1px solid var(--border); }
/* === End alignment overrides === */

/* Drawer padding adjustment */
.drawer { padding:1.1rem 1.25rem 2rem 1.9rem !important; }

/* Docker group adjustments (remove title badge, fix width) */
.docker-group { width:100% !important; cursor:default !important; }
.docker-group::before { content:none !important; display:none !important; }

/* Service list (drawer) */
.svc-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.6rem; }
.svc-row-btn { background: color-mix(in srgb,var(--svc-color, var(--cat-processing)) 20%, #12171d); border:1px solid color-mix(in srgb,var(--svc-color, var(--cat-processing)) 55%, #1c252d); border-left:4px solid var(--svc-color, var(--cat-processing)); padding:.55rem .7rem; border-radius: var(--radius-sm); font-size:.72rem; line-height:1.15; cursor:pointer; position:relative; transition: background .25s, border-color .25s, transform .25s; }
.svc-row-btn:hover { background: color-mix(in srgb,var(--svc-color, var(--cat-processing)) 30%, #12171d); }
.svc-row-btn:focus-visible { outline:2px solid var(--svc-color, var(--cat-processing)); outline-offset:2px; }
.svc-row-btn .status-icon.inline { margin-right:.4rem; }
.svc-row-btn strong { font-weight:600; }
.svc-row-btn .cat-label { font-style:normal; font-size:.6rem; margin-left:.35rem; opacity:.85; }
.svc-row-btn .svc-desc { margin:.45rem 0 0 1rem; font-size:.63rem; color:var(--muted); }

/* Details drawer enhancements */
.details { display:flex; flex-direction:column; gap:1.1rem; }
.details h2 { margin:0 0 .3rem; font-size:1.15rem; letter-spacing:.5px; }
.details .muted { color:var(--muted); font-size:.75rem; margin:.15rem 0 .4rem; }
.detail-section { background:var(--bg-alt); border:1px solid var(--border); padding:.75rem .85rem .8rem; border-radius:var(--radius-sm); position:relative; }
.detail-section + .detail-section { margin-top:.25rem; }
.detail-section h3 { margin:0 0 .45rem; font-size:.8rem; letter-spacing:.5px; text-transform:uppercase; color:var(--muted); }
.status-chip { display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .6rem .3rem; border-radius:999px; font-size:.65rem; font-weight:600; letter-spacing:.5px; background:#1d242b; border:1px solid var(--border); }
.status-chip.up { color:#48d176; border-color:#254c36; background:linear-gradient(145deg,#163021,#11241a); }
.status-chip.down { color:#ff6b6b; border-color:#5a2d2d; background:linear-gradient(145deg,#2a1616,#211212); }
.step-list { margin:.15rem 0 0 .95rem; padding:0; font-size:.65rem; line-height:1.25; display:flex; flex-direction:column; gap:.25rem; }
.step-list li { margin-left:.4rem; }
.kv-list { list-style:none; margin:.2rem 0 0; padding:0; display:flex; flex-direction:column; gap:.35rem; font-size:.65rem; }
.kv-list code { background:#1d2229; padding:.2rem .4rem; border-radius:4px; font-size:.65rem; }
.details a { color:var(--cat-processing); text-decoration:none; position:relative; }
.details a:hover { text-decoration:underline; }
.svc-desc { line-height:1.25; }
